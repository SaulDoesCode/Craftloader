"use strict";!function(e){self.Craftloader=Object.defineProperties({pre:"craft:",fetchImport:function(e){e.key=e.key||e.url;var r=+new Date,t=Craftloader.get(e.key);return t||t.expire-r>0?new Promise(function(e){return e(t)}):new Promise(function(t,a){return fetch(e.url).then(function(a){return a.text().then(function(a){e.data=a,e.stamp=r,e.expire=r+60*(e.expire||4e3)*60*1e3,e.cache&&localStorage.setItem(Craftloader.pre+e.key,JSON.stringify(e)),t(e)})})["catch"](function(e){return a("error importing -> "+e)})})},get:function(e){return JSON.parse(localStorage.getItem(e.includes(Craftloader.pre)?e:Craftloader.pre+e)||!1)},remove:function(e){return localStorage.removeItem(e.includes(Craftloader.pre)?e:Craftloader.pre+e)},removeAll:function(e){for(var r in localStorage)(!e||Craftloader.get(r).expire<=+new Date)&&Craftloader.remove(r)},Import:function(){var r=[];return Array.prototype.slice.call(arguments).forEach(function(e){return e.test===!1?Craftloader.remove(e.css||e.script):r.push(Craftloader.fetchImport({url:e.css||e.script,type:e.css?"css":"script",exec:e.execute!==!1,cache:e.cache!==!1,defer:e.defer?"defer":null,key:e.key,expire:e.expire}))}),Promise.all(r).then(function(r){return r.map(function(r){if(r.exec){var t=e.createElement("css"===r.type?"style":"script");t.defer=r.defer,"css"===r.type?t.textContent=r.data:t.src=URL.createObjectURL(new Blob([r.data])),r.key&&t.setAttribute("key",r.key),e.head.appendChild(t)}})})}},{prekey:{set:function(e){Craftloader.pre=e+":"},configurable:!0,enumerable:!0}}),Craftloader.removeAll(!0)}(document);
